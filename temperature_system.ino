/**
 * ============================================================================
 * –§–ê–ô–õ: temperature_system.ino
 * –ì–õ–ê–í–ù–´–ô –§–ê–ô–õ –ü–†–û–ï–ö–¢–ê - –¢–û–ß–ö–ê –í–•–û–î–ê –°–ò–°–¢–ï–ú–´ –ö–û–ù–¢–†–û–õ–Ø –¢–ï–ú–ü–ï–†–ê–¢–£–†–´
 * 
 * –û–°–û–ë–ï–ù–ù–û–°–¢–ò:
 * 1. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Arduino (setup() –∏ loop())
 * 2. –û–±—ä—è–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–æ–≤
 * 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–ø–ø–∞—Ä–∞—Ç—É—Ä—ã –∏ FreeRTOS
 * 4. –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
 * 
 * –°–¢–†–£–ö–¢–£–†–ê:
 * - setup(): –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
 * - loop(): —Ñ–æ–Ω–æ–≤—ã–π —Ü–∏–∫–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –∑–∞–¥–∞—á–∞—Ö FreeRTOS)
 * - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã: –¥–∏—Å–ø–ª–µ–π, –¥–∞—Ç—á–∏–∫–∏, –æ—á–µ—Ä–µ–¥–∏, –º—å—é—Ç–µ–∫—Å—ã
 * - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
 * ============================================================================
 */

// –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã
#include "system_config.h"  // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∏–Ω–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∏—Å—Ç–µ–º—ã
#include "rtos_tasks.h"     // –ó–∞–¥–∞—á–∏ FreeRTOS –∏ –∏—Ö —Å–æ–∑–¥–∞–Ω–∏–µ

// ============================================================================
// –§–£–ù–ö–¶–ò–Ø SETUP(): –û–î–ù–û–ö–†–ê–¢–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ü–£–°–ö–ï –°–ò–°–¢–ï–ú–´
// ============================================================================

void setup() {
    // –ù–ê–ß–ê–õ–û –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ô –≠–¢–ê–ü
    // ------------------------------------------------------------
    
    // –®–ê–ì 1: –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–ì–û –ü–û–†–¢–ê (Serial)
    // –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º —Å Serial –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–ª–∞–¥–∫–∏
    Serial.begin(115200);
    delay(2000);  // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ ESP32 –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Serial –º–æ–Ω–∏—Ç–æ—Ä–∞
    
    Serial.println("\n" + String(70, '='));
    Serial.println("üöÄ –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´ –ö–û–ù–¢–†–û–õ–Ø –¢–ï–ú–ü–ï–†–ê–¢–£–†–´");
    Serial.println(String(70, '='));
    
    // –®–ê–ì 2: –ê–ü–ü–ê–†–ê–¢–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–ï–†–ï–î –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ï–ô
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–∑–æ–≤—É—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–∏–Ω–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
    Serial.println("\nüîç –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê:");
    
    // 2.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∏–Ω–æ–≤ –¥–∞—Ç—á–∏–∫–æ–≤ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
    Serial.printf("  –î–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã: GPIO%d (ONE_WIRE_BUS_A)\n", ONE_WIRE_BUS_A);
    Serial.printf("  –î–∞—Ç—á–∏–∫–∏ —Å—Ç–µ–Ω–æ–∫: GPIO%d (ONE_WIRE_BUS_B)\n", ONE_WIRE_BUS_B);
    
    // 2.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –ø–∏–Ω–∞—Ö (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å HIGH –±–ª–∞–≥–æ–¥–∞—Ä—è INPUT_PULLUP)
    pinMode(ONE_WIRE_BUS_A, INPUT_PULLUP);
    pinMode(ONE_WIRE_BUS_B, INPUT_PULLUP);
    delay(50);  // –ö–æ—Ä–æ—Ç–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
    
    int voltageA = digitalRead(ONE_WIRE_BUS_A);
    int voltageB = digitalRead(ONE_WIRE_BUS_B);
    
    Serial.printf("  –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ GPIO%d: %s\n", ONE_WIRE_BUS_A, 
                  voltageA == HIGH ? "HIGH ‚úÖ" : "LOW ‚ö†Ô∏è (–≤–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)");
    Serial.printf("  –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ GPIO%d: %s\n", ONE_WIRE_BUS_B,
                  voltageB == HIGH ? "HIGH ‚úÖ" : "LOW ‚ö†Ô∏è (–≤–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)");
    
    // 2.3 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –ø–∏–Ω—ã –ø—Ä–∏–∂–∞—Ç—ã –∫ GND - –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
    if (voltageA == LOW || voltageB == LOW) {
        Serial.println("\n‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –ê–ü–ü–ê–†–ê–¢–£–†–´!");
        Serial.println("   –ü–∏–Ω—ã –¥–∞—Ç—á–∏–∫–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç LOW (–ø—Ä–∏–∂–∞—Ç—ã –∫ GND)");
        Serial.println("   –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:");
        Serial.println("   1. –î–∞—Ç—á–∏–∫–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã");
        Serial.println("   2. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—â–∏–π —Ä–µ–∑–∏—Å—Ç–æ—Ä 4.7–∫–û–º");
        Serial.println("   3. –ö–æ—Ä–æ—Ç–∫–æ–µ –∑–∞–º—ã–∫–∞–Ω–∏–µ –Ω–∞ –ø–ª–∞—Ç–µ");
        Serial.println("   4. –ü–∏–Ω—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –Ω–µ –∫ —Ç–µ–º –ø–æ—Ä—Ç–∞–º ESP32");
        Serial.println("\n   –°–ò–°–¢–ï–ú–ê –ù–ï –ë–£–î–ï–¢ –ó–ê–ü–£–©–ï–ù–ê –î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø!");
        Serial.println(String(70, '='));
        
        // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ–π –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–æ–π
        while (true) {
            delay(1000);
            Serial.print(".");  // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–∂–∏–≤–æ–π" —Å–∏—Å—Ç–µ–º—ã
        }
    }
    
    // –®–ê–ì 3: –û–°–ù–û–í–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ê–ü–ü–ê–†–ê–¢–£–†–´
    // –ï—Å–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
    Serial.println("\n‚úÖ –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ");
    Serial.println("üîÑ –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏...");
    
    initHardware();  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–ª–µ—è, –¥–∞—Ç—á–∏–∫–æ–≤, —ç–Ω–∫–æ–¥–µ—Ä–∞ –∏ –¥—Ä—É–≥–æ–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏
    
    // –®–ê–ì 4: –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò
    Serial.println("\n[INIT] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:");
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    if (!sensors[3].found) {
        Serial.println("‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –î–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏");
        Serial.println("   –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç");
        Serial.println("   –°–∏—Å—Ç–µ–º–∞ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∑–∂–µ");
    }
    
    // –®–ê–ì 5: –°–û–ó–î–ê–ù–ò–ï –ó–ê–î–ê–ß FREERTOS
    // –í—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á–∞—Ö
    Serial.println("\n[INIT] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á FreeRTOS...");
    create_rtos_tasks();
    
    // –®–ê–ì 6: –§–ò–ù–ê–õ–¨–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï –û –ó–ê–ü–£–°–ö–ï
    Serial.println("\n" + String(70, '='));
    Serial.println("‚úÖ –°–ò–°–¢–ï–ú–ê –£–°–ü–ï–®–ù–û –ó–ê–ü–£–©–ï–ù–ê");
    Serial.println("üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:");
    Serial.printf("   - –†–µ–∂–∏–º: %s\n", sysData.mode == 0 ? "–°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–Ø (MODE1)" : "–†–ê–ë–û–ß–ò–ô (MODE2)");
    Serial.printf("   - –î–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã: %s\n", sensors[3].found ? "–û–ë–ù–ê–†–£–ñ–ï–ù ‚úÖ" : "–ù–ï –ù–ê–ô–î–ï–ù ‚ö†Ô∏è");
    Serial.printf("   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: %s\n", systemInitialized ? "–î–ê ‚úÖ" : "–ù–ï–¢ ‚ö†Ô∏è");
    Serial.printf("   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: %s\n", criticalError ? "–î–ê ‚ùå" : "–ù–ï–¢ ‚úÖ");
    Serial.println(String(70, '='));
    Serial.println("\nüéõÔ∏è  –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤–≤–µ–¥–∏—Ç–µ –≤ Serial –º–æ–Ω–∏—Ç–æ—Ä):");
    Serial.println("   FIND    - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –¥–∞—Ç—á–∏–∫–æ–≤");
    Serial.println("   STATUS  - –ü–æ–¥—Ä–æ–±–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã");
    Serial.println("   MODE1   - –†–µ–∂–∏–º —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏");
    Serial.println("   MODE2   - –†–∞–±–æ—á–∏–π —Ä–µ–∂–∏–º");
    Serial.println("   HELP    - –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥");
    Serial.println(String(70, '=') + "\n");
}

// ============================================================================
// –§–£–ù–ö–¶–ò–Ø LOOP(): –û–°–ù–û–í–ù–û–ô –¶–ò–ö–õ ARDUINO (–§–û–ù–û–í–´–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì)
// ============================================================================

void loop() {
    /**
     * –í–ê–ñ–ù–û: –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∑–∞–¥–∞—á–∞—Ö FreeRTOS,
     * –∞ –Ω–µ –≤ loop(). –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è:
     * 1. –§–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
     * 2. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
     * 3. –û–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
     */
    
    static uint32_t lastSystemCheck = 0;        // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã
    static uint32_t lastSensorCheck = 0;        // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞—Ç—á–∏–∫–æ–≤
    uint32_t currentMillis = millis();          // –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
    
    // –ü–†–û–í–ï–†–ö–ê 1: –ü–ï–†–ò–û–î–ò–ß–ï–°–ö–ò–ô –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
    // ------------------------------------------------------------
    if (currentMillis - lastSystemCheck > 300000) {  // 300000 –º—Å = 5 –º–∏–Ω—É—Ç
        Serial.println("\n[SYSTEM CHECK] " + String(55, '='));
        Serial.printf("–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: %lu –º–∏–Ω—É—Ç %lu —Å–µ–∫—É–Ω–¥\n", 
                     currentMillis / 60000, (currentMillis % 60000) / 1000);
        Serial.printf("–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: %d (%s)\n", 
                     sysData.mode, 
                     sysData.mode == 0 ? "–°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–Ø" : "–†–ê–ë–û–ß–ò–ô");
        Serial.printf("–î–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã: %s\n", 
                     sensors[3].found ? "–ù–ê–ô–î–ï–ù ‚úÖ" : "–ü–û–¢–ï–†–Ø–ù ‚ùå");
        Serial.printf("–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: %s\n", 
                     systemInitialized ? "–î–ê ‚úÖ" : "–ù–ï–¢ ‚ö†Ô∏è");
        Serial.printf("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: %s\n", 
                     criticalError ? "–î–ê ‚ùå (–≥–∏–ª—å–∑–∞!)" : "–ù–ï–¢ ‚úÖ");
        Serial.printf("–û—á–µ—Ä–µ–¥—å –¥–∞–Ω–Ω—ã—Ö: %s\n", 
                     dataQueue ? "–°–û–ó–î–ê–ù–ê ‚úÖ" : "–û–¢–°–£–¢–°–¢–í–£–ï–¢ ‚ùå");
        Serial.printf("–ú—å—é—Ç–µ–∫—Å –¥–∞–Ω–Ω—ã—Ö: %s\n", 
                     dataMutex ? "–°–û–ó–î–ê–ù ‚úÖ" : "–û–¢–°–£–¢–°–¢–í–£–ï–¢ ‚ùå");
        Serial.printf("–û—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π (—ç–Ω–∫–æ–¥–µ—Ä): %s\n", 
                     eventQueue ? "–°–û–ó–î–ê–ù–ê ‚úÖ" : "–û–¢–°–£–¢–°–¢–í–£–ï–¢ ‚ùå");
        Serial.println(String(55, '=') + "\n");
        
        lastSystemCheck = currentMillis;
    }
    
    // –ü–†–û–í–ï–†–ö–ê 2: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ü–û–ò–°–ö –î–ê–¢–ß–ò–ö–û–í –ü–†–ò –î–õ–ò–¢–ï–õ–¨–ù–û–ô –ü–û–¢–ï–†–ï
    // (–µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –±–æ–ª–µ–µ 1 –º–∏–Ω—É—Ç—ã)
    // ------------------------------------------------------------
    if (currentMillis - lastSensorCheck > 60000) {  // 60000 –º—Å = 1 –º–∏–Ω—É—Ç–∞
        bool anySensorFound = false;
        for (int i = 0; i < 4; i++) {
            if (sensors[i].found) {
                anySensorFound = true;
                break;
            }
        }
        
        if (!anySensorFound) {
            Serial.println("\n‚ö†Ô∏è  [AUTO-RECONNECT] –í—Å–µ –¥–∞—Ç—á–∏–∫–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã –±–æ–ª–µ–µ 1 –º–∏–Ω—É—Ç—ã");
            Serial.println("   –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è...");
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å attemptReconnect() –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
            // attemptReconnect();
            
            Serial.println("   [AUTO-RECONNECT] –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞");
        }
        
        lastSensorCheck = currentMillis;
    }
    
    // –ü–†–û–í–ï–†–ö–ê 3: –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–ê–ú–Ø–¢–ò –ò –†–ï–°–£–†–°–û–í (—Ä–∞–∑ –≤ 10 –º–∏–Ω—É—Ç)
    // ------------------------------------------------------------
    static uint32_t lastMemoryCheck = 0;
    if (currentMillis - lastMemoryCheck > 600000) {  // 600000 –º—Å = 10 –º–∏–Ω—É—Ç
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ ESP32
        // uint32_t freeHeap = ESP.getFreeHeap();
        // Serial.printf("[MEMORY] –°–≤–æ–±–æ–¥–Ω–æ heap: %u –±–∞–π—Ç\n", freeHeap);
        
        lastMemoryCheck = currentMillis;
    }
    
    // –ö–û–†–û–¢–ö–ê–Ø –ü–ê–£–ó–ê –î–õ–Ø –î–†–£–ì–ò–• –ó–ê–î–ê–ß FREERTOS
    // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º delay(), –∞ –∏–º–µ–Ω–Ω–æ vTaskDelay –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å FreeRTOS
    vTaskDelay(pdMS_TO_TICKS(1000));  // 1000 –º—Å = –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
}

// ============================================================================
// –†–ê–ó–î–ï–õ: –ì–õ–û–ë–ê–õ–¨–ù–´–ï –û–ë–™–ï–ö–¢–´ –ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï –°–ò–°–¢–ï–ú–´
// ============================================================================

// –û–ë–™–ï–ö–¢–´ –î–õ–Ø –†–ê–ë–û–¢–´ –° –î–ò–°–ü–õ–ï–ï–ú –ò –î–ê–¢–ß–ò–ö–ê–ú–ò
// ------------------------------------------------------------

/**
 * –û–ë–™–ï–ö–¢ TFT –î–ò–°–ü–õ–ï–Ø
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É TFT_eSPI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å–ø–ª–µ–µ–º
 * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª User_Setup.h –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
 */
TFT_eSPI tft;

/**
 * –û–ë–™–ï–ö–¢–´ –®–ò–ù 1-WIRE –î–õ–Ø –î–ê–¢–ß–ò–ö–û–í DS18B20
 * –î–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —à–∏–Ω—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏:
 * - oneWireA: –¥–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π, –Ω–∞ GPIO4)
 * - oneWireB: –¥–∞—Ç—á–∏–∫–∏ —Å—Ç–µ–Ω–æ–∫ (–Ω–∞ GPIO16)
 */
OneWire oneWireA(ONE_WIRE_BUS_A);      // –®–∏–Ω–∞ A: –¥–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã, GPIO4
OneWire oneWireB(ONE_WIRE_BUS_B);      // –®–∏–Ω–∞ B: –¥–∞—Ç—á–∏–∫–∏ —Å—Ç–µ–Ω–æ–∫, GPIO16

/**
 * –û–ë–™–ï–ö–¢–´ –î–õ–Ø –†–ê–ë–û–¢–´ –° –î–ê–¢–ß–ò–ö–ê–ú–ò DALLAS TEMPERATURE
 * –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Å–≤—è–∑–∞–Ω —Å–æ —Å–≤–æ–µ–π —à–∏–Ω–æ–π 1-Wire
 */
DallasTemperature sensorsA(&oneWireA);  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞–º–∏ –Ω–∞ —à–∏–Ω–µ A
DallasTemperature sensorsB(&oneWireB);  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞–º–∏ –Ω–∞ —à–∏–Ω–µ B

// –û–°–ù–û–í–ù–´–ï –°–¢–†–£–ö–¢–£–†–´ –î–ê–ù–ù–´–• –°–ò–°–¢–ï–ú–´
// ------------------------------------------------------------

/**
 * –°–ò–°–¢–ï–ú–ù–´–ï –î–ê–ù–ù–´–ï (–æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á)
 * –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, —Ä–µ–∂–∏–º—ã, —Ñ–ª–∞–≥–∏
 * –î–æ—Å—Ç—É–ø –∑–∞—â–∏—â–∞–µ—Ç—Å—è –º—å—é—Ç–µ–∫—Å–æ–º dataMutex
 */
SystemData_t sysData;

/**
 * –ú–ê–°–°–ò–í –î–ê–ù–ù–´–• –î–ê–¢–ß–ò–ö–û–í
 * –ò–Ω–¥–µ–∫—Å—ã:
 * [0] - –°—Ç–µ–Ω–∫–∞ 100—Å–º
 * [1] - –°—Ç–µ–Ω–∫–∞ 75—Å–º  
 * [2] - –°—Ç–µ–Ω–∫–∞ 50—Å–º
 * [3] - –ì–∏–ª—å–∑–∞ 25—Å–º (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –¥–∞—Ç—á–∏–∫!)
 */
Sensor_t sensors[4];

// –û–ë–™–ï–ö–¢–´ SYNCHRONIZATION FREERTOS
// ------------------------------------------------------------

/**
 * –û–ß–ï–†–ï–î–¨ –î–õ–Ø –ü–ï–†–ï–î–ê–ß–ò –î–ê–ù–ù–´–• –ú–ï–ñ–î–£ –ó–ê–î–ê–ß–ê–ú–ò
 * –ó–∞–¥–∞—á–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π (taskMeasure) ‚Üí –ó–∞–¥–∞—á–∞ –¥–∏—Å–ø–ª–µ—è (taskDisplay)
 * –¢–∏–ø: SystemData_t (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞–º–∏ –∏ —Ä–µ–∂–∏–º–∞–º–∏)
 */
QueueHandle_t dataQueue = NULL;  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ initFreeRTOSObjects()

/**
 * –ú–¨–Æ–¢–ï–ö–° –î–õ–Ø –ó–ê–©–ò–¢–´ –û–ë–©–ò–• –î–ê–ù–ù–´–•
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ sysData –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
 */
SemaphoreHandle_t dataMutex;     // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ initFreeRTOSObjects()

// –§–õ–ê–ì–ò –ò –°–û–°–¢–û–Ø–ù–ò–Ø –°–ò–°–¢–ï–ú–´
// ------------------------------------------------------------

bool baseSaved = false;           // –§–ª–∞–≥: –±–∞–∑–æ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (–¥–ª—è MODE2)
bool systemInitialized = false;   // –§–ª–∞–≥: —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—à–ª–∞ –ø–æ–ª–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
bool criticalError = false;       // –§–ª–∞–≥: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (–ø–æ—Ç–µ—Ä—è–Ω –¥–∞—Ç—á–∏–∫ –≥–∏–ª—å–∑—ã!)
bool forceDisplayRedraw = true;   // –§–ª–∞–≥: —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –¥–∏—Å–ø–ª–µ—è

// –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï–ú
// ------------------------------------------------------------

uint8_t lastDisplayMode = 0xFF;           // –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∂–∏–º –¥–∏—Å–ø–ª–µ—è (–¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)
uint16_t lastGlobalBgColor = 0xFFFF;      // –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏)

// –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –¢–ê–ô–ú–ï–†–ê –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–ò (MODE1)
// ------------------------------------------------------------

float timeRefTemp = 0.0f;          // –û–ø–æ—Ä–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –æ—Ç—Å—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
uint32_t timeStartMs = 0;          // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –æ—Ç—Å—á—ë—Ç–∞ (–º—Å)
bool timeIsCounting = false;       // –§–ª–∞–≥: –∏–¥—ë—Ç –æ—Ç—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

// –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –†–ï–ñ–ò–ú–ê MODE2 (–†–ê–ë–û–ß–ò–ô –†–ï–ñ–ò–ú)
// ------------------------------------------------------------

float guildBaseTemp = 0.0f;        // –ë–∞–∑–æ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–∏–ª—å–∑—ã, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–∞—è –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ MODE2
uint8_t guildColorState = 0;       // –¢–µ–∫—É—â–µ–µ —Ü–≤–µ—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: 0=–∑–µ–ª—ë–Ω—ã–π, 1=–∂—ë–ª—Ç—ã–π, 2=–∫—Ä–∞—Å–Ω—ã–π

// –ö–≠–® –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø (–î–õ–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò, –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–ò–ï –ú–ï–†–¶–ê–ù–ò–Ø)
// ------------------------------------------------------------

/**
 * –ü–û–°–õ–ï–î–ù–ò–ï –û–¢–û–ë–†–ê–ñ–Å–ù–ù–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø –¢–ï–ú–ü–ï–†–ê–¢–£–†
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è - –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
 * –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: -1000.0f (—è–≤–Ω–æ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–≤–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏)
 */
float lastDisplayTemps[4] = { -1000.0f, -1000.0f, -1000.0f, -1000.0f };

/**
 * –ü–û–°–õ–ï–î–ù–ò–ï –û–¢–û–ë–†–ê–ñ–Å–ù–ù–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø –î–ï–õ–¨–¢ (–ò–ó–ú–ï–ù–ï–ù–ò–ô –¢–ï–ú–ü–ï–†–ê–¢–£–†)
 * –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞–º - –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
 */
float lastDisplayDeltas[4] = { -1000.0f, -1000.0f, -1000.0f, -1000.0f };

// –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ú–ï–¢–†–ò–ö–ò –°–ò–°–¢–ï–ú–´
// ------------------------------------------------------------

/**
 * –¢–ï–ö–°–¢–û–í–´–ï –ù–ê–ó–í–ê–ù–ò–Ø –î–ê–¢–ß–ò–ö–û–í –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ù–ê –î–ò–°–ü–õ–ï–ï
 * –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–Ω–¥–µ–∫—Å–∞–º –º–∞—Å—Å–∏–≤–∞ sensors[4]
 */
const char* sensorNames[4] = { 
    "–°—Ç–µ–Ω–∫–∞ 100—Å–º",  // –ò–Ω–¥–µ–∫—Å 0
    "–°—Ç–µ–Ω–∫–∞ 75—Å–º",   // –ò–Ω–¥–µ–∫—Å 1
    "–°—Ç–µ–Ω–∫–∞ 50—Å–º",   // –ò–Ω–¥–µ–∫—Å 2
    "–ì–∏–ª—å–∑–∞ 25—Å–º"    // –ò–Ω–¥–µ–∫—Å 3 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—Ç—á–∏–∫!)
};

/**
 * –ú–ï–¢–†–ò–ö–ò –®–†–ò–§–¢–û–í (–í–´–ß–ò–°–õ–Ø–Æ–¢–°–Ø –ü–†–ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò –î–ò–°–ü–õ–ï–Ø)
 * –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ initHardware() –ø—Ä–∏ –≤—ã–∑–æ–≤–µ tft.init()
 */
int bigFontHeight = 0;     // –í—ã—Å–æ—Ç–∞ –±–æ–ª—å—à–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ (FONT_BIG) –≤ –ø–∏–∫—Å–µ–ª—è—Ö
int deltaFontHeight = 0;   // –í—ã—Å–æ—Ç–∞ —à—Ä–∏—Ñ—Ç–∞ –¥–µ–ª—å—Ç—ã (FONT_DELTA) –≤ –ø–∏–∫—Å–µ–ª—è—Ö
int smallFontHeight = 0;   // –í—ã—Å–æ—Ç–∞ –º–∞–ª–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ (FONT_SMALL) –≤ –ø–∏–∫—Å–µ–ª—è—Ö

/**
 * –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ï –®–ò–†–ò–ù–´ –°–¢–†–û–ö (–î–õ–Ø –í–´–†–ê–í–ù–ò–í–ê–ù–ò–Ø)
 * –í—ã—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫ —à—Ä–∏—Ñ—Ç–æ–≤ –¥–ª—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
 */
int maxTempWidth = 0;      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "-123.45¬∞C")
int maxDeltaWidth = 0;     // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ –¥–µ–ª—å—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Œî+12.34¬∞C")

/**
 * Y-–ö–û–û–†–î–ò–ù–ê–¢–´ –û–ë–õ–ê–°–¢–ï–ô –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ù–ê –î–ò–°–ü–õ–ï–ï
 * –ö–∞–∂–¥–æ–º—É –¥–∞—Ç—á–∏–∫—É –≤—ã–¥–µ–ª–µ–Ω–∞ –æ–±–ª–∞—Å—Ç—å –≤—ã—Å–æ—Ç–æ–π RECT_HEIGHT (60 –ø–∏–∫—Å–µ–ª–µ–π)
 * –î–∏—Å–ø–ª–µ–π 320 –ø–∏–∫—Å–µ–ª–µ–π –≤ –≤—ã—Å–æ—Ç—É, 4 –¥–∞—Ç—á–∏–∫–∞ √ó 60 = 240 –ø–∏–∫—Å–µ–ª–µ–π + –æ—Ç—Å—Ç—É–ø—ã
 */
const int displayYPositions[4] = { 0, 60, 120, 180 };

// ============================================================================
// –ù–û–í–´–ï –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –≠–ù–ö–û–î–ï–†–ê (–î–û–ë–ê–í–õ–ï–ù–´ –í –í–ï–†–°–ò–ò 4.0)
// ============================================================================

/**
 * –û–ß–ï–†–ï–î–¨ –°–û–ë–´–¢–ò–ô –≠–ù–ö–û–î–ï–†–ê
 * –ó–∞–¥–∞—á–∞ —ç–Ω–∫–æ–¥–µ—Ä–∞ (taskEncoder) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è, –∑–∞–¥–∞—á–∞ –¥–∏—Å–ø–ª–µ—è (taskDisplay) –∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ initFreeRTOSObjects()
 */
QueueHandle_t eventQueue = NULL;

/**
 * –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê
 * –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –º–µ–Ω—é –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
 * 0 = STATE_MAIN (–≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –ø–æ–∫–∞–∑–∞–Ω–∏—è–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã)
 * 1 = STATE_MODE (–º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã)
 * –ò–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ/–Ω–∞–∂–∞—Ç–∏–∏ —ç–Ω–∫–æ–¥–µ—Ä–∞ –∏–ª–∏ –ø–æ —Ç–∞–π–º–∞—É—Ç—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
 */
uint8_t systemState = 0;

// ============================================================================
// –ö–û–ù–ï–¶ –§–ê–ô–õ–ê temperature_system.ino
// ============================================================================